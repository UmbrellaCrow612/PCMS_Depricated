<div class="main">
  <mat-card appearance="raised" class="main_container">
    <mat-card-header>
      <mat-card-title>Search for a case </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <form
        class="flex_between"
        [formGroup]="SearchCaseNumberForm"
        (ngSubmit)="onSearchCaseNumberFormSubmit()"
      >
        <mat-form-field>
          <mat-label>Case Number</mat-label>
          <input type="text" matInput formControlName="SearchCaseNumberInput" />
          <mat-hint>Enter case number</mat-hint>
          @if
          (SearchCaseNumberForm.get("SearchCaseNumberInput")?.hasError('required'))
          {
          <mat-error>Required Case Number</mat-error>
          } @else if
          (SearchCaseNumberForm.get("SearchCaseNumberInput")?.hasError('minlength'))
          {
          <mat-error>Case Number to short</mat-error>
          } @else if (
          SearchCaseNumberForm.get("SearchCaseNumberInput")?.hasError("maxlength"))
          {
          <mat-error>Case Number to long</mat-error>
          } @else if (
          SearchCaseNumberForm.get("SearchCaseNumberInput")?.hasError("pattern"))
          {
          <mat-error>Case Number must start with CA</mat-error>
          }
        </mat-form-field>
        <div class="search_case_number_btns">
          <button
            mat-raised-button
            type="submit"
            [disabled]="SearchCaseNumberForm.invalid"
          >
            Search
          </button>
          <button
            mat-raised-button
            type="button"
            (click)="ClearSearchCaseNumberForm()"
          >
            Clear
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
  <mat-card appearance="raised" class="main_container">
    <mat-card-header>
      <mat-card-title>Search for cases based on filters</mat-card-title>
    </mat-card-header>
    <mat-card-content class="flex_left_gap">
      <form
        [formGroup]="SearchCaseFiltersForm"
        class="flex_wrap"
        (ngSubmit)="onSearchCaseFilterFormSubmit()"
      >
        <!-- Case Status -->
        <mat-form-field>
          <mat-label>Case Status</mat-label>
          <mat-select formControlName="CaseStatusSelectControl">
            @for (CaseStatusOption of CaseStatusOptions; track CaseStatusOption)
            {
            <mat-option [value]="CaseStatusOption.status">{{
              CaseStatusOption.status
            }}</mat-option>
            }
          </mat-select>
          <mat-hint>Pick a case status</mat-hint>
          @if
          (SearchCaseFiltersForm.get("CaseStatusSelectControl")?.hasError('required'))
          {
          <mat-error>Required case status</mat-error>
          }
        </mat-form-field>
        <!-- Case Status ends -->

        <!-- Case Range -->
        <mat-form-field>
          <mat-label>Enter a date range</mat-label>
          <mat-date-range-input
            formGroupName="CaseDateRangeControl"
            [rangePicker]="picker"
            [dateFilter]="CaseRangeDateFilter"
          >
            <input
              matStartDate
              formControlName="start"
              placeholder="Start date"
            />
            <input matEndDate formControlName="end" placeholder="End date" />
          </mat-date-range-input>
          <mat-hint>MM/DD/YYYY â€“ MM/DD/YYYY</mat-hint>
          <mat-datepicker-toggle
            matIconSuffix
            [for]="picker"
          ></mat-datepicker-toggle>
          <mat-date-range-picker #picker></mat-date-range-picker>
          @if
          (SearchCaseFiltersForm.get("CaseDateRangeControl")?.get("start")?.hasError('matDatepickerFilter'))
          {
          <mat-error>Invalid date ranges</mat-error>
          } @else if
          (SearchCaseFiltersForm.get("CaseDateRangeControl")?.get("start")?.hasError('required'))
          {
          <mat-error>Required start date</mat-error>
          } @else if
          (SearchCaseFiltersForm.get("CaseDateRangeControl")?.get("end")?.hasError('required'))
          {
          <mat-error>Required end date</mat-error>
          }
        </mat-form-field>
        <!-- Case Range end -->
        <!-- Case CasePriority -->
        <mat-form-field>
          <mat-label>Case Priority</mat-label>
          <mat-select formControlName="CasePrioritySelectControl">
            @for (CasePriorityOption of CasePriorityOptions; track
            CasePriorityOption) {
            <mat-option [value]="CasePriorityOption.level">{{
              CasePriorityOption.level
            }}</mat-option>
            }
          </mat-select>
          <mat-hint>Pick a case Priority</mat-hint>
          @if
          (SearchCaseFiltersForm.get("CasePrioritySelectControl")?.hasError("required"))
          {
          <mat-error>Required Case Priority</mat-error>
          }
        </mat-form-field>
        <!-- Case CasePriority ends-->

        <!-- Incident Type -->
        <mat-form-field>
          <mat-label>Incident Type</mat-label>
          <input
            type="text"
            aria-label="Incident Type"
            matInput
            formControlName="IncidentTypeAutoCompleteControl"
            [matAutocomplete]="auto"
          />
          <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete">
            @for (IncidentTypeFilteredOption of IncidentTypeFilteredOptions |
            async; track IncidentTypeFilteredOption) {
            <mat-option [value]="IncidentTypeFilteredOption.type">{{
              IncidentTypeFilteredOption.type
            }}</mat-option>
            }
          </mat-autocomplete>
          <mat-hint>Pick a Incident Type</mat-hint>
          @if
          (SearchCaseFiltersForm.get("IncidentTypeAutoCompleteControl")?.hasError("required"))
          {
          <mat-error>Required Incident Type</mat-error>
          } @else if
          (SearchCaseFiltersForm.get("IncidentTypeAutoCompleteControl")?.hasError("inValidIncidentTypeOption"))
          {
          <mat-error>Invalid Incident Type</mat-error>
          }
        </mat-form-field>
        <!-- Incident Type ends-->

        <!-- City location -->
        <mat-form-field>
          <mat-label>City</mat-label>
          <input
            type="text"
            aria-label="City Location"
            matInput
            formControlName="CityAutoCompleteControl"
            [matAutocomplete]="autoTwo"
          />
          <mat-autocomplete autoActiveFirstOption #autoTwo="matAutocomplete">
            @for (option of CityFilteredOptions | async; track option) {
            <mat-option [value]="option.city">{{ option.city }}</mat-option>
            }
          </mat-autocomplete>
          <mat-hint>Pick a City</mat-hint>
          @if
          (SearchCaseFiltersForm.get("CityAutoCompleteControl")?.hasError("required"))
          {
          <mat-error>Required City</mat-error>
          } @else if
          (SearchCaseFiltersForm.get("CityAutoCompleteControl")?.hasError("inValidCityOption"))
          {
          <mat-error>Invalid City option</mat-error>
          }
        </mat-form-field>
        <!-- City location ends-->

        <!-- Department -->
        <mat-form-field>
          <mat-label>Department</mat-label>
          <input
            type="text"
            aria-label="Department"
            matInput
            formControlName="DepartmentAutoCompleteControl"
            [matAutocomplete]="autoThree"
          />
          <mat-autocomplete autoActiveFirstOption #autoThree="matAutocomplete">
            @for (option of DepartmentFilteredOptions | async; track option) {
            <mat-option [value]="option.name">{{ option.name }}</mat-option>
            }
          </mat-autocomplete>
          <mat-hint>Pick a Department</mat-hint>
          @if
          (SearchCaseFiltersForm.get("DepartmentAutoCompleteControl")?.hasError("required"))
          {
          <mat-error>Required Department</mat-error>
          } @else if
          (SearchCaseFiltersForm.get("DepartmentAutoCompleteControl")?.hasError("inValidDepartmentOption"))
          {
          <mat-error>Invalid Department option</mat-error>
          }
        </mat-form-field>
        <!-- Department end-->

        <div class="case_filter_btns">
          <button
            mat-raised-button
            [disabled]="SearchCaseFiltersForm.invalid"
            type="submit"
          >
            Search
          </button>
          <button
            mat-raised-button
            (click)="ClearSearchCaseFiltersForm()"
            type="button"
          >
            Clear
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
  <mat-card appearance="raised" class="main_container">
    <mat-card-header>
      <mat-card-title
        >Search for a cases based on wildcard searches</mat-card-title
      >
    </mat-card-header>
    <mat-card-content> to be implemented </mat-card-content>
  </mat-card>
</div>
